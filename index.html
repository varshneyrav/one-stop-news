<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    
    <meta content="origin" name="referrer">
    <!-- <meta content="dark" name="color-scheme"> -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
<!--     <script src="script.js" type="text/javascript"></script> -->
    
    <title> One Stop | News</title>
    <link rel="stylesheet" href="style.css">
    
</head>
<body>
<div id="preloaders">
</div>

    <nav>
        <div class="main-nav container flex">
            <a href="#" onclick="reload()" class="company-logo">
                <img src="logo.png" alt="company logo">
            </a>
            
            <body onload=display_ct();>
                <span id='ct5' ></span>
                

            <h3>ONE STOP NEWS</h3><br>
            <div class="search-bar flex">
                <input id="search-text" type="text" class="news-input" placeholder="e.g. Science">
                <button id="search-button" class="search-button">Search</button>
            </div>
        </div>
    </nav>
    <!--            second nav           -->
<div class="items">
    <div class="nav-links">
        <ul class="flex">
            <li class="hover-link nav-item" id="dropdown-content">Home</li>
            <li class="hover-link nav-item" id="Latest News" onclick="onNavItemClick('Latest News')">Latest News</li>
            <li class="hover-link nav-item" id="technology" onclick="onNavItemClick('technology')">Technology</li>
            <li class="hover-link nav-item" id="stocks" onclick="onNavItemClick('stocks')">Stocks</li>
            <li class="hover-link nav-item" id="finance" onclick="onNavItemClick('finance')">Finance</li>
            <li class="hover-link nav-item" id="politics" onclick="onNavItemClick('politics')">Politics</li>
            <li class="hover-link nav-item" id="world" onclick="onNavItemClick('world')">world</li>
            <li class="hover-link nav-item" id="Entertainment" onclick="onNavItemClick('Entertainment')">Entertainment</li>
            <li class="hover-link nav-item" id="Astrology" onclick="onNavItemClick('Astrology')">Astrology</li>
            <li class="hover-link nav-item" id="Shop now" onclick="onNavItemClick('Shop now')">Shop now</li>
            <li class="hover-link nav-item" id="Life Style" onclick="onNavItemClick('Life Style')">Life Style</li>
            <li class="hover-link nav-item" id="stocks" onclick="onNavItemClick('stocks')">Stocks</li>
          
        </ul>
    </div>
</div>
<div class="weathers">
    <form>
        <div class="row" id="heading">
            <pre class="trend">[ Weather news ]</pre>
            <input type="search" id="search" placeholder="eg. Agra " />
        </div>

    </form>
        <div class="row" id="weather">
        </div>
</div>
    
<div class="trending-news"><pre class="trend">[ trending news ]</pre><br>
    <div class="items_">
            <ul class="ul">
                <li class="hover-link nav-item" id="BOLLYWOOD" onclick="onNavItemClick('BOLLYWOOD')">BOLLYWOOD</li>
                <li class="hover-link nav-item" id="weather News" onclick="onNavItemClick('weather News')">weather News</li>
                <li class="hover-link nav-item" id="ICC WORLD CUP 2023" onclick="onNavItemClick('ICC WORLD CUP 2023')">ICC WORLD CUP 2023</li>
                <li class="hover-link nav-item" id="RAIN NEWS OF INDIA" onclick="onNavItemClick('RAIN NEWS OF INDIA')">RAIN NEWS TODAY</li>
                <li class="hover-link nav-item" id="Science" onclick="onNavItemClick('Science')">Science</li>
            </ul>
    </div>
</div>

<main>
    <div class="cards-container container flex" id="cards-container"> 
    </div>
</main>
<template id="template-news-card">
    <div class="card">
        <div class="card-header">
            <img src="https://via.placeholder.com/400x200" alt="news-image" id="news-img">
        </div>
        <div class="card-content">
            <h2 id="news-title">This is the Title</h2>
            <h6 class="news-source" id="news-source">End Gadget 26/08/2023</h6>
            <p class="news-desc" id="news-desc">Lorem, ipsum dolor sit amet consectetur adipisicing elit. Recusandae saepe quis voluptatum quisquam vitae doloremque facilis molestias quae ratione cumque!</p>
        </div>        
    </div>
</template> 
<!-- <div id="footer">copyright (c)</div> -->
<footer id="footer">
    <div class="container">
    <div class="footerTop"> <div class="footLogo"> 
        <a class="fotLogo" href="#"> Explore the: One Stop News</a><br>
        <!-- <img src="Logo copy.png" alt="company logo"> -->
        <hr>
        <div class="copyright"> Copyright © 2023 OSN. The OSN is not responsible for the content of external sites. All Right Reserved </div>
    </div>
    </footer>
<!-- <script src="load.js"></script> -->
<!-- <script src="w_app.js"></script>
<script src="script.js"></script> -->

</body>
<script>
    var loading = document.getElementById("preloaders");
    window.addEventListener("load", function(){
        <!-- loading.style.animationDelay="2s"; -->
        loading.style.display="none";
    })
</script>
<script type="text/javascript"> 
        function display_ct5() {
        var x = new Date()
        var ampm = x.getHours( ) >= 12 ? ' PM' : ' AM';
        
        var x1=x.getMonth() + 1+ "/" + x.getDate() + "/" + x.getFullYear(); 
        x1 = x1 + " - " +  x.getHours( )+ ":" +  x.getMinutes() + ":" +  x.getSeconds();
        document.getElementById('ct5').innerHTML = x1;
        display_c5();
         }
         function display_c5(){
        var refresh=1000; // Refresh rate in milli seconds
        mytime=setTimeout('display_ct5()',refresh)
        }
        display_c5()
        </script>
<script type="text/javascript"> 
        const API_KEY1 = "97dc581a8f2c4c59b99176f6c7e18fc5";
// const weather1 = document.querySelector("#template-news-card");

window.addEventListener("load", () => fetchNews("cricket"));

function reload() {
    window.location.reload();
}

async function fetchNews(query) {
    const url_ = `https://newsapi.org/v2/everything?q=`; 
    const res = await fetch(`${url_}${query}&apiKey=${API_KEY1}`);
    const data = await res.json();
    bindData(data.articles);
}

function bindData(articles) {
    const cardsContainer = document.getElementById("cards-container");
    const newsCardTemplate = document.getElementById("template-news-card");

    cardsContainer.innerHTML = "";

    articles.forEach((article) => {
        if (!article.urlToImage) return;
        const cardClone = newsCardTemplate.content.cloneNode(true);
        fillDataInCard(cardClone, article);
        cardsContainer.appendChild(cardClone);
    });
}

function fillDataInCard(cardClone, article) {
    const newsImg = cardClone.querySelector("#news-img");
    const newsTitle = cardClone.querySelector("#news-title");
    const newsSource = cardClone.querySelector("#news-source");
    const newsDesc = cardClone.querySelector("#news-desc");

    newsImg.src = article.urlToImage;
    newsTitle.innerHTML = article.title;
    newsDesc.innerHTML = article.description;

    const date = new Date(article.publishedAt).toLocaleString("en-US", {
        timeZone: "Asia/Jakarta",
    });

    newsSource.innerHTML = `${article.source.name} · ${date}`;

    cardClone.firstElementChild.addEventListener("click", () => {
        window.open(article.url, "_blank");
    });
}

let curSelectedNav = null;
function onNavItemClick(id) {
    fetchNews(id);
    const navItem = document.getElementById(id);
    curSelectedNav?.classList.remove("active");
    curSelectedNav = navItem;
    curSelectedNav.classList.add("active");
}

const searchButton = document.getElementById("search-button");
const searchText = document.getElementById("search-text");

searchButton.addEventListener("click", () => {
    const query = searchText.value;
    if (!query) return;
    fetchNews(query);
    curSelectedNav?.classList.remove("active");
    curSelectedNav = null;
});
</script>
        <script src="w_app.js" type="text/javascript"></script>
</html>
